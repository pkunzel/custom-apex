[
  {
    "id":"139738029822816514093"
   ,"Identification":{
      "Name":"APEX FancyTree Select"
    }
   ,"Source":{
      "PL\/SQL Code":"FUNCTION F_AJAX (\n    P_REGION   IN APEX_PLUGIN.T_REGION,\n    P_PLUGIN   IN APEX_PLUGIN.T_PLUGIN\n) RETURN APEX_PLUGIN.T_REGION_AJAX_RESULT\n    IS\n    VR_RESULT   APEX_PLUGIN.T_REGION_AJAX_RESULT;\nBEGIN\n    APEX_UTIL.JSON_FROM_SQL(SQLQ =\u003E RTRIM(P_REGION.SOURCE,\u0027;\u0027));\n    RETURN VR_RESULT;\nEND;\n\nFUNCTION F_RENDER (\n    P_REGION                IN APEX_PLUGIN.T_REGION,\n    P_PLUGIN                IN APEX_PLUGIN.T_PLUGIN,\n    P_IS_PRINTER_FRIENDLY   IN BOOLEAN\n) RETURN APEX_PLUGIN.T_REGION_RENDER_RESULT IS\n    VR_RESULT             APEX_PLUGIN.T_REGION_RENDER_RESULT;\n    C_CONF_JSON           CONSTANT APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_01%TYPE := P_REGION.ATTRIBUTE_01;\n    C_SRC_ITEM            CONSTANT APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_02%TYPE := P_REGION.ATTRIBUTE_02;\n    C_ERR_MSG             CONSTANT APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_03%TYPE := P_REGION.ATTRIBUTE_03;\n    C_ACTIVE_ID_ITEM      CONSTANT APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_04%TYPE := P_REGION.ATTRIBUTE_04;\n    C_EXPANDED_NOTES_ITEM CONSTANT APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_07%TYPE := P_REGION.ATTRIBUTE_07;\n    C_ITEMS2SUBMIT        CONSTANT APEX_APPLICATION_PAGE_REGIONS.AJAX_ITEMS_TO_SUBMIT%TYPE := APEX_PLUGIN_UTIL.PAGE_ITEM_NAMES_TO_JQUERY(P_REGION.AJAX_ITEMS_TO_SUBMIT);\n    C_REGION_ID           CONSTANT VARCHAR2(200 CHAR) := \u0027ft-\u0027 || P_REGION.STATIC_ID;\n    VR_IS_CACHE_VALID     VARCHAR2(4000 CHAR) := \u0027V1\u0027;\n    VR_USE_LOCALSTORAGE   APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_05%TYPE := P_REGION.ATTRIBUTE_05;\n    VR_GET_CACHE_VERSION  APEX_APPLICATION_PAGE_REGIONS.ATTRIBUTE_06%TYPE := P_REGION.ATTRIBUTE_06;\nBEGIN\n    APEX_CSS.ADD_FILE(\n        P_NAME        =\u003E \u0027fancytree.pkgd.min\u0027,\n        P_DIRECTORY   =\u003E P_PLUGIN.FILE_PREFIX,\n        P_VERSION     =\u003E NULL,\n        P_KEY         =\u003E \u0027fancytreecsssrc\u0027\n    );\n\n    APEX_JAVASCRIPT.ADD_LIBRARY(\n        P_NAME        =\u003E \u0027fancytree.pkgd.min\u0027,\n        P_DIRECTORY   =\u003E P_PLUGIN.FILE_PREFIX,\n        P_VERSION     =\u003E NULL,\n        P_KEY         =\u003E \u0027fancytreejssrc\u0027\n    );\n\n    SYS.HTP.P( \u0027\u003Cdiv id=\"\u0027|| APEX_PLUGIN_UTIL.ESCAPE( C_REGION_ID, TRUE ) || \u0027\" class=\"fancy-tree-region\"\u003E\u003C\/div\u003E\u0027 );\n    \n    IF VR_USE_LOCALSTORAGE = \u0027Y\u0027 AND VR_GET_CACHE_VERSION IS NOT NULL THEN\n        VR_IS_CACHE_VALID := APEX_PLUGIN_UTIL.GET_PLSQL_FUNCTION_RESULT(VR_GET_CACHE_VERSION);\n    END IF;\n\n    APEX_JAVASCRIPT.ADD_ONLOAD_CODE( \u0027fancyTree(apex, $).initTree(\u0027\n     || APEX_JAVASCRIPT.ADD_VALUE( \u0027#\u0027 || C_REGION_ID, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( APEX_PLUGIN.GET_AJAX_IDENTIFIER, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( P_REGION.NO_DATA_FOUND_MESSAGE, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_ERR_MSG, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_CONF_JSON, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_ITEMS2SUBMIT, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( P_REGION.ESCAPE_OUTPUT, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_SRC_ITEM, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_ACTIVE_ID_ITEM, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( VR_USE_LOCALSTORAGE, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( VR_IS_CACHE_VALID, TRUE )\n     || APEX_JAVASCRIPT.ADD_VALUE( C_EXPANDED_NOTES_ITEM, TRUE )\n     || \u0027);\u0027 );\n\n    RETURN VR_RESULT;\nEND;"
    }
  }
]
